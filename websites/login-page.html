<!DOCTYPE html>
<head>
    <title>Login Page</title>
</head>
<body style="margin:0px">
    <div style="background-color:aliceblue;font-size: 40px;font-weight: bold;">
        Login
    </div><br>
    <label for="username-input">Username</label>
    <input id="username-input"><br>
    <label for="password-input">Password</label>
    <input id="password-input" type="password">
    <!--add 1 for name? -->
    <br><br>
    <button id="sign-up-button">Sign Up</button>
    <button id="enter-button">Enter</button>

    <!--
        <input type="text" id="myInput" placeholder="Enter text">

    -->

    <script src="/client-functions.js"></script>
    <script>


        const signupButton = document.getElementById("sign-up-button");

        // Add a click event listener
        signupButton.addEventListener("click", function(){
            console.log("Button clicked!");
            //app.get("/login", function(req,res)
            window.location.href = "/signup"
        });

        // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Working_with_objects
        
        function getTextBoxValue() {
            var textBox = document.getElementById("myTextBox");
            var value = textBox.value;
            alert("You entered: " + value);
        }

        document.getElementById("enter-button").addEventListener("click", async function(){
            // Get user inputs
            // Make the server request
            // Tell the user if it was successful

            console.log("Enter button clicked")

            let returned = await makeServerRequest("sign-in", 
            {
                username: document.getElementById("username-input").value, 
                password: document.getElementById("password-input").value
            })
            // console.log prints to the Inspect Element console. (Use CTRL+SHIFT+I on site to see)
            console.log("Returned JSON: " + JSON.stringify(returned))  // JSON.stringify turns a JSON object into a string
            if(returned.success == true){
                console.log("Success!")
                setCookie("sessionId", returned.sessionId, new Date(Date.now() + 1000 * 60 * 60))
                window.location.href = "/payment-page"
                // Log In the user now
            } else {
                console.log("Failure!")
                alert(returned.message)
                //alert("This user does not exist");
            }
        })
        /*
            Log In
        */
    

    </script>
</body>



